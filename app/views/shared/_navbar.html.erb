<nav class="bg-white border-gray-200 h-18 min-w-screen mx-auto mb-6 px-4 fixed top-0 left-0 right-0 z-50">
  <div class="flex h-full items-center justify-around">
    <div class="flex items-center gap-6">
      <%= link_to "KarAir", root_path, class: "text-4xl text-orange-600" %>
    </div>
    <div class="hidden sm:flex items-center gap-4">
      <% if user_signed_in? %>
        <%= link_to "Dashboard", root_path, class: "text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm" %>
        <%= link_to "Jobs", jobs_path, class: "text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm" %>
      <% else %>
        <%= link_to "Home", root_path, class: "text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm" %>
      <% end %>
    </div>
    <div class="flex items-center">
      <% if user_signed_in? %>
        <% if current_user.recruiter? %>
          <%= link_to notifications_path, class: "hover:text-gray-900 px-3 py-2 rounded-md text-base relative text-gray-700 inline-flex items-center justify-center" do %>
            <% if current_user.notifications.unread.any? %>
              <i class="fa-solid fa-bell text-xl"></i>
              <span class="absolute top-0 right-1 inline-flex items-center justify-center min-w-[16px] h-[16px] px-1 text-[9px] font-bold leading-none text-white bg-red-500 rounded-full border-2 border-white shadow-sm">
                <%= current_user.notifications.unread.count > 99 ? '99+' : current_user.notifications.unread.count %>
              </span>
            <% else %>
              <i class="fa-regular fa-bell text-xl"></i>
            <% end %>
          <% end %>
        <% end %>

        <%= link_to profile_path(current_user.profile), class: "p-2 flex-shrink-0" do %>
          <% if current_user.profile&.photo&.attached? %>
            <%= image_tag url_for(current_user.profile.avatar_variant(60)), alt: "Avatar", loading: "lazy", class: "rounded-full object-cover border-2 border-gray-300", style: "height:40px;width:40px;" %>
          <% else %>
            <div class="rounded-full bg-gray-200 flex items-center justify-center text-sm text-gray-700 border-2 border-gray-300" style="height:40px;width:40px;">
              <%= current_user.email.first.upcase %>
            </div>
          <% end %>
        <% end %>

        <%= link_to "Sign out", destroy_user_session_path, data: { turbo_method: :delete }, class: "ml-2 text-sm text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md" %>
      <% else %>
        <%= link_to "Sign in", new_user_session_path, class: "text-sm text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md" %>
      <% end %>
    </div>
  </div>
</nav>


